<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Bot - Admin Panel</title>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/login-check.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-robot"></i>
                <h2>WhatsApp Bot</h2>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</li>
                    <li data-section="settings"><i class="fas fa-cog"></i> Settings</li>
                    <li data-section="groups"><i class="fas fa-users"></i> Group Management</li>
                    <li data-section="contacts"><i class="fas fa-address-book"></i> Contact Management</li>
                    <li data-section="messages"><i class="fas fa-paper-plane"></i> Send Messages</li>
                    <li data-section="saved-links"><i class="fas fa-link"></i> Saved Links</li>
                    <li data-section="statuses"><i class="fas fa-image"></i> Status Viewer</li>
                    <li data-section="system-logs"><i class="fas fa-list"></i> System Logs</li>
                    <li data-section="chat-logs"><i class="fas fa-comment-dots"></i> Chat Logs</li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn btn-danger"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="hamburger" id="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </div>
                <h2 id="section-title">Dashboard</h2>
                <div class="user-info">
                    <span id="status-indicator" class="status online"></span>
                    <span>Admin</span>
                </div>
            </header>

            <!-- Content Sections -->
            <section class="content-section active" id="dashboard">
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-info">
                            <h3>Groups</h3>
                            <p id="groups-count">Loading...</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-plug"></i></div>
                        <div class="stat-info">
                            <h3>Plugins</h3>
                            <p id="plugins-count">Loading...</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-download"></i></div>
                        <div class="stat-info">
                            <h3>Downloads</h3>
                            <p id="downloads-count">Loading...</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-info">
                            <h3>Uptime</h3>
                            <p id="uptime">Loading...</p>
                        </div>
                    </div>
                </div>

                <div class="features-section">
                    <h3><i class="fas fa-toggle-on"></i> Quick Settings</h3>
                    <div class="feature-toggles">
                        <div class="toggle-card">
                            <div class="toggle-info">
                                <h4>Auto Reply</h4>
                                <p>Automatically respond to messages</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="auto-reply-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="toggle-card">
                            <div class="toggle-info">
                                <h4>Hide Online Status</h4>
                                <p>Hide "online" status from contacts</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="hide-online-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="toggle-card">
                            <div class="toggle-info">
                                <h4>Disable Read Receipts</h4>
                                <p>Don't send blue ticks for read messages</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="disable-receipts-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="toggle-card">
                            <div class="toggle-info">
                                <h4>Social Media Download</h4>
                                <p>Download content from social media links</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="social-media-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="toggle-card">
                            <div class="toggle-info">
                                <h4>Link Saving</h4>
                                <p>Save media links when auto-download is disabled</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="link-saving-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="toggle-card">
                            <div class="toggle-info">
                                <h4>Auto Status View</h4>
                                <p>Automatically view contact statuses</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="status-view-toggle">
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section" id="settings">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-wrench"></i> Bot Configuration</h3>
                    </div>
                    <div class="card-body">
                        <form id="config-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="prefix">Command Prefix</label>
                                    <input type="text" id="prefix" name="PREFIX">
                                </div>
                                <div class="form-group">
                                    <label for="owner-number">Owner Number</label>
                                    <input type="text" id="owner-number" name="OWNER_NUMBER">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="bot-name">Bot Name</label>
                                    <input type="text" id="bot-name" name="BOT_NAME">
                                </div>
                                <div class="form-group">
                                    <label for="session-id">Session ID</label>
                                    <input type="text" id="session-id" name="SESSION_ID">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="download-folder">Download Folder</label>
                                    <input type="text" id="download-folder" name="DOWNLOAD_FOLDER">
                                </div>
                            </div>
                            <div class="form-row">
                                <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Configuration</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>

            <section class="content-section" id="groups">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-users"></i> Group Management</h3>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="allowed-groups">Allowed Download Groups</label>
                            <div class="info-text">
                                <p><i class="fas fa-info-circle"></i> Groups listed here will be allowed to use auto-download for social media links.</p>
                            </div>
                            <div class="tag-input-container">
                                <input type="text" id="group-input" placeholder="Add a group ID (e.g., 123456789@g.us)">
                                <button id="add-group" class="btn btn-sm"><i class="fas fa-plus"></i></button>
                            </div>
                            <div id="groups-container" class="tags-container">
                                <!-- Group tags will be inserted here -->
                            </div>
                        </div>
                        <div class="form-row">
                            <button id="save-groups" class="btn btn-primary"><i class="fas fa-save"></i> Save Groups</button>
                            <div class="info-text ml-3">
                                <p><i class="fas fa-check-circle"></i> Groups are auto-saved when added or removed</p>
                            </div>
                        </div>
                        <div class="group-commands-help mt-4">
                            <h4>Group Management Commands</h4>
                            <ul>
                                <li><code>.getid</code> - Get the current group ID</li>
                                <li><code>.allowedgroups</code> - List all allowed groups</li>
                                <li><code>.addallowedgroup current</code> - Add current group to allowed list</li>
                                <li><code>.removeallowedgroup current</code> - Remove current group from allowed list</li>
                                <li><code>.checkgroup</code> - Check if current group is allowed</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section" id="messages">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-paper-plane"></i> Send Messages</h3>
                        <div class="refresh-controls">
                            <button id="refresh-contacts" class="btn btn-sm"><i class="fas fa-sync-alt"></i> Refresh Contacts</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <form id="message-form">
                            <div class="form-group">
                                <label for="recipient-type">Recipient Type</label>
                                <select id="recipient-type" class="form-control">
                                    <option value="group">Group</option>
                                    <option value="individual">Individual</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="group-recipient-container">
                                <label for="group-recipient">Select Group</label>
                                <select id="group-recipient" class="form-control">
                                    <option value="">Loading groups...</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="individual-recipient-container" style="display:none;">
                                <label for="individual-recipient">Select Contact</label>
                                <select id="individual-recipient" class="form-control">
                                    <option value="">Loading contacts...</option>
                                </select>
                                
                                <div class="manual-number-container mt-4">
                                    <label for="manual-phone-number">Or Enter Phone Number Manually</label>
                                    <div class="input-container">
                                        <input type="text" id="manual-phone-number" class="form-control" placeholder="Enter phone number (e.g., 94774144215)">
                                        <small class="text-muted">Enter the full phone number without any + or special characters.</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="message-text">Message</label>
                                <textarea id="message-text" class="form-control" rows="4" placeholder="Type your message here..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="message-media">Attach Media (Optional)</label>
                                <div class="media-upload-container">
                                    <input type="file" id="message-media" class="form-control">
                                    <small class="text-muted">Supported formats: jpg, jpeg, png, mp4, mp3</small>
                                </div>
                                <div id="media-preview" class="media-preview"></div>
                            </div>
                            
                            <div class="form-row">
                                <button type="submit" id="send-message-btn" class="btn btn-primary">
                                    <i class="fas fa-paper-plane"></i> Send Message
                                </button>
                            </div>
                        </form>
                        
                        <div class="message-status-container mt-4">
                            <h4>Recent Messages</h4>
                            <div id="recent-messages">
                                <p class="text-muted">No messages sent yet.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="content-section" id="saved-links">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-link"></i> Saved Links</h3>
                        <div class="refresh-controls">
                            <button id="refresh-links" class="btn btn-sm"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="status-filters">
                            <div class="status-search">
                                <input type="text" id="links-search" placeholder="Search by URL, group, or user...">
                            </div>
                            <div class="status-sort">
                                <label>Filter: </label>
                                <select id="links-platform-filter">
                                    <option value="all" selected>All Platforms</option>
                                    <option value="YouTube">YouTube</option>
                                    <option value="TikTok">TikTok</option>
                                    <option value="Instagram">Instagram</option>
                                    <option value="Facebook">Facebook</option>
                                    <option value="Twitter">Twitter</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="saved-links-container">
                            <div class="loading-indicator">Loading saved links...</div>
                            <!-- Saved links will be inserted here -->
                        </div>
                        
                        <div id="no-links" class="no-data-message" style="display:none;">
                            No saved links found.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Status Viewer Section -->
            <section class="content-section" id="statuses">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-image"></i> Status Viewer</h3>
                        <div class="refresh-controls">
                            <button id="refresh-statuses" class="btn btn-sm"><i class="fas fa-sync-alt"></i> Refresh</button>
                            <select id="status-filter">
                                <option value="all" selected>All Types</option>
                                <option value="image">Images Only</option>
                                <option value="video">Videos Only</option>
                            </select>
                            <select id="timeframe-filter">
                                <option value="24h" selected>Last 24 Hours</option>
                                <option value="48h">Last 48 Hours</option>
                                <option value="7d">Last 7 Days</option>
                                <option value="30d">Last 30 Days</option>
                                <option value="all">All Time</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="status-filters">
                            <div class="status-search">
                                <input type="text" id="contact-search" placeholder="Search by contact...">
                            </div>
                            <div class="status-sort">
                                <label>Sort by: </label>
                                <select id="status-sort">
                                    <option value="newest">Newest First</option>
                                    <option value="oldest">Oldest First</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="status-container" id="status-grid">
                            <div class="loading-indicator">Loading statuses...</div>
                            <!-- Statuses will be inserted here -->
                        </div>
                        
                        <div id="no-statuses" class="no-data-message" style="display:none;">
                            No status updates have been saved yet.
                        </div>
                    </div>
                </div>
            </section>

            <!-- System Logs Section -->
            <section class="content-section" id="system-logs">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-list"></i> System Logs</h3>
                    </div>
                    <div class="card-body">
                        <div class="log-container">
                            <div class="log-entry">
                                <span class="log-time">10:23:45</span>
                                <span class="log-type info">INFO</span>
                                <span class="log-message">Bot started successfully</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:24:12</span>
                                <span class="log-type success">SUCCESS</span>
                                <span class="log-message">Downloaded video from YouTube</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:25:30</span>
                                <span class="log-type warning">WARNING</span>
                                <span class="log-message">Rate limit reached for TikTok API</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:26:15</span>
                                <span class="log-type error">ERROR</span>
                                <span class="log-message">Failed to download Instagram content</span>
                            </div>
                            <!-- More log entries would go here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Chat Logs Section -->
            <section class="content-section" id="chat-logs">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-comment-dots"></i> Chat Logs</h3>
                        <div class="refresh-controls">
                            <button id="refresh-logs" class="btn btn-sm"><i class="fas fa-sync-alt"></i> Refresh</button>
                            <select id="logs-limit">
                                <option value="25">25 entries</option>
                                <option value="50">50 entries</option>
                                <option value="100" selected>100 entries</option>
                                <option value="200">200 entries</option>
                            </select>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="logs-filter">
                            <label>Filter: </label>
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="text">Text</button>
                            <button class="filter-btn" data-filter="media">Media</button>
                            <button class="filter-btn" data-filter="group">Groups</button>
                            <button class="filter-btn" data-filter="private">Private</button>
                        </div>
                        <div class="chat-log-container" id="chat-logs-container">
                            <div class="loading-indicator">Loading logs...</div>
                            <!-- Chat logs will be inserted here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- New Contact Management Section -->
            <section class="content-section" id="contacts">
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-address-book"></i> Contact Management</h3>
                        <div class="refresh-controls">
                            <button id="refresh-contacts-list" class="btn btn-sm"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <div class="info-text">
                                <p><i class="fas fa-info-circle"></i> Manage custom contacts that will be used for name resolution across the application.</p>
                            </div>
                            
                            <!-- Add Contact Form -->
                            <div class="contact-form-container">
                                <h4 class="mt-2 mb-3">Add/Edit Contact</h4>
                                <form id="contact-form">
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="contact-number">Phone Number</label>
                                            <div class="input-container">
                                                <input type="text" id="contact-number" class="form-control" placeholder="Enter phone number (e.g., 94774144215)" required>
                                                <small class="text-muted">Enter the full phone number without any + or special characters.</small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="contact-name">Contact Name</label>
                                            <input type="text" id="contact-name" class="form-control" placeholder="Enter contact name" required>
                                            <input type="hidden" id="contact-id" value="">
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <button type="submit" id="save-contact-btn" class="btn btn-primary">
                                            <i class="fas fa-save"></i> Save Contact
                                        </button>
                                        <button type="button" id="clear-contact-form" class="btn btn-sm">
                                            <i class="fas fa-times"></i> Clear Form
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Contacts List -->
                            <div class="contacts-list-container mt-4">
                                <h4 class="mb-3">Contacts List</h4>
                                <div class="contacts-search-container">
                                    <input type="text" id="contacts-search" class="form-control" placeholder="Search contacts...">
                                </div>
                                <div id="contacts-list" class="mt-3">
                                    <div class="loading-indicator">Loading contacts...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <div id="toast" class="toast"></div>

    <!-- Script imports -->
    <script src="js/modules/ui-utils.js"></script>
    <script src="js/modules/config-manager.js"></script>
    <script src="js/modules/navigation-manager.js"></script>
    <script src="js/modules/dashboard-manager.js"></script>
    <script src="js/modules/chat-logs-manager.js"></script>
    <script src="js/modules/statuses-manager.js"></script>
    <script src="js/modules/saved-links-manager.js"></script>
    <script src="js/modules/groups-manager.js"></script>
    <script src="js/modules/messaging-manager.js"></script>
    <script src="js/modules/contacts-manager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
